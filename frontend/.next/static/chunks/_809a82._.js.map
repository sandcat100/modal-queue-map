{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/margaret/modal-queue-map/frontend/convex/_generated/api.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Generated `api` utility.\n *\n * THIS CODE IS AUTOMATICALLY GENERATED.\n *\n * To regenerate, run `npx convex dev`.\n * @module\n */\n\nimport { anyApi } from \"convex/server\";\n\n/**\n * A utility for referencing Convex functions in your app's API.\n *\n * Usage:\n * ```js\n * const myFunctionReference = api.myModule.myFunction;\n * ```\n */\nexport const api = anyApi;\nexport const internal = anyApi;\n"],"names":[],"mappings":"AAAA,kBAAkB,GAClB;;;;;;;CAOC;;;;AAED;AAAA;;AAUO,MAAM,MAAM,yJAAA,CAAA,SAAM;AAClB,MAAM,WAAW,yJAAA,CAAA,SAAM"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/margaret/modal-queue-map/frontend/components/colorscale.jsx"],"sourcesContent":["import * as d3 from \"d3\";\nimport { useEffect, useRef } from \"react\";\n\nconst COLOR_LEGEND_MARGIN = { top: 38, right: 0, bottom: 38, left: 90 };\n\nexport default function ColorLegend(props) {\n  const width = props.width\n  const height = props.height\n\n  const canvasRef = useRef(null);\n\n  const boundsWidth =\n    props.width - COLOR_LEGEND_MARGIN.right - COLOR_LEGEND_MARGIN.left;\n  const boundsHeight =\n    props.height - COLOR_LEGEND_MARGIN.top - COLOR_LEGEND_MARGIN.bottom;\n\n  const domain = props.colorScale.domain();\n  const max = domain[0];\n  const xScale = d3.scaleLinear().range([0, boundsWidth]).domain([0, max]);\n\n  const allTicks = xScale.ticks(9).map((tick, i) => {\n    return (\n      <g key={`tick-${i}`}>\n        <line\n          key={`line-${i}`}\n          x1={xScale(tick)}\n          x2={xScale(tick)}\n          y1={0}\n          y2={boundsHeight + 10}\n          stroke=\"black\"\n        />\n        <text\n          key={`key-${i}`}\n          x={xScale(tick)}\n          y={boundsHeight + 25}\n          fontSize={10}\n          textAnchor=\"middle\"\n        >\n          {tick + \"s\"}\n        </text>\n      </g>\n    );\n  });\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      console.log(canvas)\n    }\n    const context = canvas?.getContext(\"2d\");\n\n    if (!context) {\n      return;\n    }\n\n    for (let i = 0; i < boundsWidth; ++i) {\n      context.fillStyle = props.colorScale((max * i) / boundsWidth);\n      context.fillRect(i, 0, 1, boundsHeight);\n    }\n  }, [props.width, props.height, props.colorScale]);\n\n  return (\n    <div style={{ width, height }}>\n      <div\n        style={{\n          position: \"relative\",\n          transform: `translate(${COLOR_LEGEND_MARGIN.left}px,\n            ${COLOR_LEGEND_MARGIN.top}px`,\n        }}\n      >\n        <canvas ref={canvasRef} width={boundsWidth} height={boundsHeight} />\n        <svg\n          width={boundsWidth}\n          height={boundsHeight}\n          style={{ position: \"absolute\", top: 0, left: 0, overflow: \"visible\" }}\n        >\n          {allTicks}\n        </svg>\n      </div>\n    </div>\n  );\n};\n\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AADA;;;;;AAGA,MAAM,sBAAsB;IAAE,KAAK;IAAI,OAAO;IAAG,QAAQ;IAAI,MAAM;AAAG;AAEvD,SAAS,YAAY,KAAK;;IACvC,MAAM,QAAQ,MAAM,KAAK;IACzB,MAAM,SAAS,MAAM,MAAM;IAE3B,MAAM,YAAY,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAEzB,MAAM,cACJ,MAAM,KAAK,GAAG,oBAAoB,KAAK,GAAG,oBAAoB,IAAI;IACpE,MAAM,eACJ,MAAM,MAAM,GAAG,oBAAoB,GAAG,GAAG,oBAAoB,MAAM;IAErE,MAAM,SAAS,MAAM,UAAU,CAAC,MAAM;IACtC,MAAM,MAAM,MAAM,CAAC,EAAE;IACrB,MAAM,SAAS,sIAAG,WAAW,GAAG,KAAK,CAAC;QAAC;QAAG;KAAY,EAAE,MAAM,CAAC;QAAC;QAAG;KAAI;IAEvE,MAAM,WAAW,OAAO,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM;QAC1C,qBACE,6LAAC;;8BACC,6LAAC;oBAEC,IAAI,OAAO;oBACX,IAAI,OAAO;oBACX,IAAI;oBACJ,IAAI,eAAe;oBACnB,QAAO;mBALF,CAAC,KAAK,EAAE,GAAG;;;;;8BAOlB,6LAAC;oBAEC,GAAG,OAAO;oBACV,GAAG,eAAe;oBAClB,UAAU;oBACV,YAAW;8BAEV,OAAO;mBANH,CAAC,IAAI,EAAE,GAAG;;;;;;WAVX,CAAC,KAAK,EAAE,GAAG;;;;;IAoBvB;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM,SAAS,UAAU,OAAO;YAChC,IAAI,QAAQ;gBACV,QAAQ,GAAG,CAAC;YACd;YACA,MAAM,UAAU,QAAQ,WAAW;YAEnC,IAAI,CAAC,SAAS;gBACZ;YACF;YAEA,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,EAAE,EAAG;gBACpC,QAAQ,SAAS,GAAG,MAAM,UAAU,CAAC,AAAC,MAAM,IAAK;gBACjD,QAAQ,QAAQ,CAAC,GAAG,GAAG,GAAG;YAC5B;QACF;gCAAG;QAAC,MAAM,KAAK;QAAE,MAAM,MAAM;QAAE,MAAM,UAAU;KAAC;IAEhD,qBACE,6LAAC;QAAI,OAAO;YAAE;YAAO;QAAO;kBAC1B,cAAA,6LAAC;YACC,OAAO;gBACL,UAAU;gBACV,WAAW,CAAC,UAAU,EAAE,oBAAoB,IAAI,CAAC;YAC/C,EAAE,oBAAoB,GAAG,CAAC,EAAE,CAAC;YACjC;;8BAEA,6LAAC;oBAAO,KAAK;oBAAW,OAAO;oBAAa,QAAQ;;;;;;8BACpD,6LAAC;oBACC,OAAO;oBACP,QAAQ;oBACR,OAAO;wBAAE,UAAU;wBAAY,KAAK;wBAAG,MAAM;wBAAG,UAAU;oBAAU;8BAEnE;;;;;;;;;;;;;;;;;AAKX;GA5EwB;KAAA"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///Users/margaret/modal-queue-map/frontend/components/heatmapcell.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\"\nimport * as d3 from \"d3\"\nimport ColorLegend from \"../components/colorscale\"\n\n// const colorScale = d3\n//   .scaleSequential()\n//   .interpolator(d3.interpolateRdYlGn)\n//   .domain([16, 0]);\n\nexport default function HeatmapCell({x, y, width, height, colorScale, data, isActive, handleHover}) {\n    const componentRef = useRef(null)\n\n    const magnify = 10\n    const values = data.values\n\n    function handleHovers(event, time, resource_type, values) {\n        handleHover(event, time, resource_type, values)\n        d3.select(event.target.parentNode).raise();\n    }\n\n    function getMedian(sorted_array) {\n        if (sorted_array.length === 0) {\n          return 0\n        }\n            \n        const mid = Math.floor(sorted_array.length / 2);\n      \n        if (sorted_array.length % 2 === 0) {\n          return (sorted_array[mid - 1] + sorted_array[mid]) / 2;\n        } else {\n          return sorted_array[mid];\n        }\n      }\n\n    const min_benchmark_value = values[0]\n    const median_benchmark_value = getMedian(values)\n    const max_benchmark_value = values[values.length - 1]\n\n    useEffect(() => {\n        if (isActive) {\n            d3.select(componentRef.current).raise();\n        }\n      }, []);\n\n    return (\n        <g>\n            <defs>\n                <linearGradient id={`linear-gradient-${x}-${y}`} x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                    <stop offset=\"0%\" stopColor={colorScale(min_benchmark_value)} />\n                    <stop offset=\"50%\" stopColor={colorScale(median_benchmark_value)} />\n                    <stop offset=\"100%\" stopColor={colorScale(max_benchmark_value)} />\n                </linearGradient>\n            </defs>\n            <rect\n                rx=\"4\" // round the corners\n                x={isActive ? x - magnify/2 : x}\n                y={isActive ? y - magnify/2 : y}\n                width={isActive ? width + magnify : width}\n                height={isActive ? height + magnify : height}\n                fill={`url(#linear-gradient-${x}-${y})`}\n                stroke=\"black\"\n                strokeWidth={isActive ? \"2px\" : \"0px\"}\n                onMouseEnter={(event) => handleHovers(event, data.time, data.resource_type, values)}\n                onMouseLeave={(event) => handleHovers(event, data.time, data.resource_type, values)}\n            >\n            </rect>\n            <text\n                x={isActive ? x - magnify/2 + ((width+magnify) / 2) : x}\n                y={isActive ? y + magnify/2 : y}\n                textAnchor=\"middle\"\n                pointerEvents=\"none\"\n                fontSize={10}\n            >\n                {isActive && values ? median_benchmark_value.toFixed(1) + \"s\" : \"\"}\n            </text>\n        </g>\n    );\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AADA;;;;;;AAQe,SAAS,YAAY,EAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,WAAW,EAAC;;IAC9F,MAAM,eAAe,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE;IAE5B,MAAM,UAAU;IAChB,MAAM,SAAS,KAAK,MAAM;IAE1B,SAAS,aAAa,KAAK,EAAE,IAAI,EAAE,aAAa,EAAE,MAAM;QACpD,YAAY,OAAO,MAAM,eAAe;QACxC,sIAAG,MAAM,CAAC,MAAM,MAAM,CAAC,UAAU,EAAE,KAAK;IAC5C;IAEA,SAAS,UAAU,YAAY;QAC3B,IAAI,aAAa,MAAM,KAAK,GAAG;YAC7B,OAAO;QACT;QAEA,MAAM,MAAM,KAAK,KAAK,CAAC,aAAa,MAAM,GAAG;QAE7C,IAAI,aAAa,MAAM,GAAG,MAAM,GAAG;YACjC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,YAAY,CAAC,IAAI,IAAI;QACvD,OAAO;YACL,OAAO,YAAY,CAAC,IAAI;QAC1B;IACF;IAEF,MAAM,sBAAsB,MAAM,CAAC,EAAE;IACrC,MAAM,yBAAyB,UAAU;IACzC,MAAM,sBAAsB,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE;IAErD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACN,IAAI,UAAU;gBACV,sIAAG,MAAM,CAAC,aAAa,OAAO,EAAE,KAAK;YACzC;QACF;gCAAG,EAAE;IAEP,qBACI,6LAAC;;0BACG,6LAAC;0BACG,cAAA,6LAAC;oBAAe,IAAI,CAAC,gBAAgB,EAAE,EAAE,CAAC,EAAE,GAAG;oBAAE,IAAG;oBAAK,IAAG;oBAAK,IAAG;oBAAK,IAAG;;sCACxE,6LAAC;4BAAK,QAAO;4BAAK,WAAW,WAAW;;;;;;sCACxC,6LAAC;4BAAK,QAAO;4BAAM,WAAW,WAAW;;;;;;sCACzC,6LAAC;4BAAK,QAAO;4BAAO,WAAW,WAAW;;;;;;;;;;;;;;;;;0BAGlD,6LAAC;gBACG,IAAG,IAAI,oBAAoB;;gBAC3B,GAAG,WAAW,IAAI,UAAQ,IAAI;gBAC9B,GAAG,WAAW,IAAI,UAAQ,IAAI;gBAC9B,OAAO,WAAW,QAAQ,UAAU;gBACpC,QAAQ,WAAW,SAAS,UAAU;gBACtC,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;gBACvC,QAAO;gBACP,aAAa,WAAW,QAAQ;gBAChC,cAAc,CAAC,QAAU,aAAa,OAAO,KAAK,IAAI,EAAE,KAAK,aAAa,EAAE;gBAC5E,cAAc,CAAC,QAAU,aAAa,OAAO,KAAK,IAAI,EAAE,KAAK,aAAa,EAAE;;;;;;0BAGhF,6LAAC;gBACG,GAAG,WAAW,IAAI,UAAQ,IAAK,CAAC,QAAM,OAAO,IAAI,IAAK;gBACtD,GAAG,WAAW,IAAI,UAAQ,IAAI;gBAC9B,YAAW;gBACX,eAAc;gBACd,UAAU;0BAET,YAAY,SAAS,uBAAuB,OAAO,CAAC,KAAK,MAAM;;;;;;;;;;;;AAIhF;GApEwB;KAAA"}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///Users/margaret/modal-queue-map/frontend/components/heatmap.jsx"],"sourcesContent":["import * as d3 from \"d3\"\nimport { useMemo } from \"react\"\nimport HeatmapCell from \"../components/heatmapcell\"\n\nconst MARGIN = { top: 30, right: 50, bottom: 100, left: 90 };\n\nexport default function Heatmap(props) {\n\n    const boundsWidth = props.width - MARGIN.right - MARGIN.left;\n    const boundsHeight = props.height - MARGIN.top - MARGIN.bottom;\n\n    const yAxisElements = [\"H100\", \"A100-80GB\", \"A100\", \"L40S\", \"A10G\", \"L4\", \"T4\"]    \n    const xAxisElements = useMemo(() => [...new Set(props.data.map((d) => d.time))], [props.data])\n\n    const yScale = useMemo(() => {\n        return d3\n          .scaleBand()\n          .range([0, boundsHeight])\n          .domain(yAxisElements)\n          .padding(0.01);\n    }, [props.data, props.width]);\n\n    const xScale = useMemo(() => {\n        return d3\n          .scaleBand()\n          .range([0, boundsWidth])\n          .domain(xAxisElements)\n          .padding(0.01);\n    }, [props.data, props.width]);\n    \n    const yLabels = yAxisElements.map((name, i) => {\n        const yPos = yScale(name) ?? 0;\n        return (\n            <text\n            key={i}\n            x={-5}\n            y={yPos + yScale.bandwidth() / 2}\n            textAnchor=\"end\"\n            dominantBaseline=\"middle\"\n            fontSize={15}\n            >\n            {name}\n            </text>\n        );\n    });\n\n    const xLabels = xAxisElements.map((name, i) => {\n        const xPos = xScale(name) ?? 0;\n\n        const dt_element = new Date(name * 1000)\n        const date_formatted = `${dt_element.toLocaleString('default', { month: 'short' })}${dt_element.getDate()} ${dt_element.getHours()}:${String(dt_element.getMinutes()).padStart(2, '0')}`\n\n        return (\n            <text\n            key={i}\n            x={xPos + 15}\n            y={boundsHeight + 10}\n            textAnchor=\"end\"\n            dominantBaseline=\"middle\"\n            fontSize={10}\n            transform={`rotate(-45 ${xPos + xScale.bandwidth() / 2} ${boundsHeight + 10})`}\n            >\n            {date_formatted}\n            </text>\n        );\n    });\n\n    const allRects = props.data.map((d, i) => useMemo(() => {\n        if (d.values === null) {\n            return;\n        }\n        \n        const isActive = props.activeIndex && d.time === props.activeIndex[0] && d.resource_type === props.activeIndex[1]\n\n        return (\n            <HeatmapCell\n                key={i}\n                x={xScale(d.time) + 0.5}\n                y={yScale(d.resource_type) + 0.5}\n                width={xScale.bandwidth() - 1}\n                height={yScale.bandwidth() - 1}\n                colorScale={props.colorScale}\n                data={d}\n                isActive={isActive}\n                handleHover={props.handleHover}\n            />\n        );\n    }, [props.activeIndex, props.data]\n\n    ))\n\n    return (\n        <div>\n            <svg width={props.width} height={props.height}>\n                <g\n                    width={boundsWidth}\n                    height={boundsHeight}\n                    transform={`translate(${[MARGIN.left, MARGIN.top].join(\",\")})`}\n                >\n                {allRects}\n                {xLabels}\n                {yLabels}\n                </g>\n            </svg>\n        </div>\n    )\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///Users/margaret/modal-queue-map/frontend/components/application.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from \"react\"\nimport { useQuery } from \"convex/react\";\nimport { api } from \"../convex/_generated/api\";\nimport * as d3 from \"d3\";\n\nimport Heatmap from \"../components/heatmap\"\nimport ColorLegend from \"../components/colorscale\"\n\nconst colorScale = d3\n  .scaleSequential()\n  .interpolator(d3.interpolateRdYlGn)\n  .domain([18, 0]);\n\nconst GPU_TYPES = [\"H100\", \"A100-80GB\", \"A100\", \"L40S\", \"A10G\", \"L4\", \"T4\"]\n\nexport default function Application({data}) {\n  const [activeIndex, setActiveIndex] = useState(null);\n\n  function handleHover(event, time, resource_type, values) {\n    if (event.type === 'mouseenter') {\n      setActiveIndex(() => [time, resource_type, values])\n    } else {\n      setActiveIndex(() => null)\n    }\n  }\n\n  let sample_string = \"[hover over a cell]\"\n  if (activeIndex) {\n    sample_string = \"[\" + activeIndex[2].map(num => num.toFixed(1) + \"s\").join(\", \") + \"]\"\n  }\n  \n  return (\n    <div className=\"heatmap-container\">\n    <Heatmap\n        width={1600}\n        height={400}\n        data={data}\n        colorScale={colorScale}\n        activeIndex={activeIndex}\n        handleHover={handleHover}\n    />\n    <p className=\"sample-datapoints\">Samples taken during this bucket of time: {sample_string}</p>\n    <ColorLegend\n        width={700}\n        height={100}\n        colorScale={colorScale}\n    />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAHA;;;;;;;;;AAKA,MAAM,aAAa,sIAChB,eAAe,GACf,YAAY,CAAC,sIAAG,iBAAiB,EACjC,MAAM,CAAC;IAAC;IAAI;CAAE;AAEjB,MAAM,YAAY;IAAC;IAAQ;IAAa;IAAQ;IAAQ;IAAQ;IAAM;CAAK;AAE5D,SAAS,YAAY,EAAC,IAAI,EAAC;;IACxC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,SAAS,YAAY,KAAK,EAAE,IAAI,EAAE,aAAa,EAAE,MAAM;QACrD,IAAI,MAAM,IAAI,KAAK,cAAc;YAC/B,eAAe,IAAM;oBAAC;oBAAM;oBAAe;iBAAO;QACpD,OAAO;YACL,eAAe,IAAM;QACvB;IACF;IAEA,IAAI,gBAAgB;IACpB,IAAI,aAAa;QACf,gBAAgB,MAAM,WAAW,CAAC,EAAE,CAAC,GAAG,CAAC,CAAA,MAAO,IAAI,OAAO,CAAC,KAAK,KAAK,IAAI,CAAC,QAAQ;IACrF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACf,6LAAC,yHAAA,CAAA,UAAO;gBACJ,OAAO;gBACP,QAAQ;gBACR,MAAM;gBACN,YAAY;gBACZ,aAAa;gBACb,aAAa;;;;;;0BAEjB,6LAAC;gBAAE,WAAU;;oBAAoB;oBAA2C;;;;;;;0BAC5E,6LAAC,4HAAA,CAAA,UAAW;gBACR,OAAO;gBACP,QAAQ;gBACR,YAAY;;;;;;;;;;;;AAIpB;GAlCwB;KAAA"}},
    {"offset": {"line": 587, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 593, "column": 0}, "map": {"version":3,"sources":["file:///Users/margaret/modal-queue-map/frontend/app/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\"\nimport { useQuery } from \"convex/react\";\nimport { api } from \"../convex/_generated/api\";\nimport * as d3 from \"d3\";\n\nimport Application from \"../components/application\"\n\nconst GPU_TYPES = [\"H100\", \"A100-80GB\", \"A100\", \"L40S\", \"A10G\", \"L4\", \"T4\"]\n\nexport default function Home() {\n  const [hourGranularity, setHourGranularity] = useState(6);\n  const queue_times = useQuery(api.queue_times.get)\n\n  if (!queue_times) {\n    return\n  }\n\n  queue_times.sort((a, b) => b.time - a.time)\n\n  const queue_times_bucket_to_gpu_samples = {}\n\n  const min_time = queue_times[queue_times.length - 1].time\n\n  const time_markers = []\n  for (let i=min_time; i <= Math.floor(Date.now() / 1000); i += (60 * 60 * hourGranularity)) {\n    time_markers.push(i)\n  }\n\n  // Get rid of old time markers, we only want to show what can fit the page\n  const time_markers_sliced = time_markers.slice(-40)\n\n  for (const time_marker of time_markers_sliced) {\n    queue_times_bucket_to_gpu_samples[time_marker] = {}\n    GPU_TYPES.forEach(gpu_type => {\n      queue_times_bucket_to_gpu_samples[time_marker][gpu_type] = []\n    })\n  }\n\n  const recent_queue_times = queue_times.filter(item => item.time >= time_markers_sliced[0]);\n\n  time_markers_sliced.reverse()\n  let current_time_marker_index = 0\n  let current_time_marker = time_markers_sliced[current_time_marker_index]\n\n  // Aggregate the data points into buckets of time\n  for (const queue_time of recent_queue_times) {\n    while (queue_time.time < current_time_marker) {\n      current_time_marker_index++\n      current_time_marker = time_markers_sliced[current_time_marker_index]\n    }\n    queue_times_bucket_to_gpu_samples[current_time_marker][queue_time.resource_type].push(queue_time.value)\n  }\n\n  // Reconstruct data as an array of objects, where each object contains gpu type, benchmark time, timestamp\n  const queue_types_bucketed = []\n  for (const [queue_time_key, gpu_samples] of Object.entries(queue_times_bucket_to_gpu_samples)) {\n    for (const [gpu_sample_key, bucketed_benchmark_values] of Object.entries(gpu_samples)) {\n      queue_types_bucketed.push({\n        \"resource_type\": gpu_sample_key,\n        \"time\": queue_time_key,\n        \"values\": bucketed_benchmark_values.sort((a, b) => a - b)\n      })\n    }\n  }\n\n  function handleClick(event) {\n    const button_id = event.target.id\n    if (button_id === \"button1\") {\n      setHourGranularity(() => 0.5) // 0.5hr increments is about 1 day of data\n    } else if (button_id === \"button5\") {\n      setHourGranularity(() => 3) // 3hr increments is about 5 days of data\n    } else if (button_id === \"button10\") {\n      setHourGranularity(() => 6) //6hr increments is about 10 days of data\n    }\n  }\n  \n  return (\n    <main>\n      <h1>How quickly can you get a GPU on Modal?</h1>\n      <h2>Median TTYCR (time to your code running) sampled on each of our GPU types üèéÔ∏è</h2>\n      <div className=\"time-selector-div\">\n        <button onClick={(event) => handleClick(event)} id=\"button1\" className={hourGranularity === 0.5 ? \"selected-button\" : \"\"}>Last day</button>\n        <button onClick={(event) => handleClick(event)} id=\"button5\" className={hourGranularity === 3 ? \"selected-button\" : \"\"}>Last 5 days</button>\n        <button onClick={(event) => handleClick(event)} id=\"button10\" className={hourGranularity === 6 ? \"selected-button\" : \"\"}>Last 10 days</button>\n      </div>\n      {queue_times && <Application\n        data={queue_types_bucketed}\n      />\n      }\n    </main>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAEA;AAJA;;;AAHA;;;;;;AASA,MAAM,YAAY;IAAC;IAAQ;IAAa;IAAQ;IAAQ;IAAQ;IAAM;CAAK;AAE5D,SAAS;;IACtB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,cAAc,CAAA,GAAA,2JAAA,CAAA,WAAQ,AAAD,EAAE,8HAAA,CAAA,MAAG,CAAC,WAAW,CAAC,GAAG;IAEhD,IAAI,CAAC,aAAa;QAChB;IACF;IAEA,YAAY,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI;IAE1C,MAAM,oCAAoC,CAAC;IAE3C,MAAM,WAAW,WAAW,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,IAAI;IAEzD,MAAM,eAAe,EAAE;IACvB,IAAK,IAAI,IAAE,UAAU,KAAK,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK,OAAO,KAAM,KAAK,KAAK,gBAAkB;QACzF,aAAa,IAAI,CAAC;IACpB;IAEA,0EAA0E;IAC1E,MAAM,sBAAsB,aAAa,KAAK,CAAC,CAAC;IAEhD,KAAK,MAAM,eAAe,oBAAqB;QAC7C,iCAAiC,CAAC,YAAY,GAAG,CAAC;QAClD,UAAU,OAAO,CAAC,CAAA;YAChB,iCAAiC,CAAC,YAAY,CAAC,SAAS,GAAG,EAAE;QAC/D;IACF;IAEA,MAAM,qBAAqB,YAAY,MAAM,CAAC,CAAA,OAAQ,KAAK,IAAI,IAAI,mBAAmB,CAAC,EAAE;IAEzF,oBAAoB,OAAO;IAC3B,IAAI,4BAA4B;IAChC,IAAI,sBAAsB,mBAAmB,CAAC,0BAA0B;IAExE,iDAAiD;IACjD,KAAK,MAAM,cAAc,mBAAoB;QAC3C,MAAO,WAAW,IAAI,GAAG,oBAAqB;YAC5C;YACA,sBAAsB,mBAAmB,CAAC,0BAA0B;QACtE;QACA,iCAAiC,CAAC,oBAAoB,CAAC,WAAW,aAAa,CAAC,CAAC,IAAI,CAAC,WAAW,KAAK;IACxG;IAEA,0GAA0G;IAC1G,MAAM,uBAAuB,EAAE;IAC/B,KAAK,MAAM,CAAC,gBAAgB,YAAY,IAAI,OAAO,OAAO,CAAC,mCAAoC;QAC7F,KAAK,MAAM,CAAC,gBAAgB,0BAA0B,IAAI,OAAO,OAAO,CAAC,aAAc;YACrF,qBAAqB,IAAI,CAAC;gBACxB,iBAAiB;gBACjB,QAAQ;gBACR,UAAU,0BAA0B,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI;YACzD;QACF;IACF;IAEA,SAAS,YAAY,KAAK;QACxB,MAAM,YAAY,MAAM,MAAM,CAAC,EAAE;QACjC,IAAI,cAAc,WAAW;YAC3B,mBAAmB,IAAM,KAAK,0CAA0C;;QAC1E,OAAO,IAAI,cAAc,WAAW;YAClC,mBAAmB,IAAM,GAAG,yCAAyC;;QACvE,OAAO,IAAI,cAAc,YAAY;YACnC,mBAAmB,IAAM,GAAG,yCAAyC;;QACvE;IACF;IAEA,qBACE,6LAAC;;0BACC,6LAAC;0BAAG;;;;;;0BACJ,6LAAC;0BAAG;;;;;;0BACJ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAO,SAAS,CAAC,QAAU,YAAY;wBAAQ,IAAG;wBAAU,WAAW,oBAAoB,MAAM,oBAAoB;kCAAI;;;;;;kCAC1H,6LAAC;wBAAO,SAAS,CAAC,QAAU,YAAY;wBAAQ,IAAG;wBAAU,WAAW,oBAAoB,IAAI,oBAAoB;kCAAI;;;;;;kCACxH,6LAAC;wBAAO,SAAS,CAAC,QAAU,YAAY;wBAAQ,IAAG;wBAAW,WAAW,oBAAoB,IAAI,oBAAoB;kCAAI;;;;;;;;;;;;YAE1H,6BAAe,6LAAC,6HAAA,CAAA,UAAW;gBAC1B,MAAM;;;;;;;;;;;;AAKd;GAlFwB;;QAEF,2JAAA,CAAA,WAAQ;;;KAFN"}},
    {"offset": {"line": 758, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}